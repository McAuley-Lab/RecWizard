<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" /><link rel="next" title="Supporting Modules" href="supporting.html" /><link rel="prev" title="Recommender Module" href="recommender.html" />

    <!-- Generated with Sphinx 7.1.2 and Furo 2023.09.10 -->
        <title>Generator Module - RecWizard</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=362ab14a" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">RecWizard</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../../_static/logo.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../../../_static/logo.png" alt="Dark Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">GET STARTED</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../quick_start/concept.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../quick_start/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../quick_start/example.html">First Example</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">USER GUIDE</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../usage/loading/index.html">Use Existing Models</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Use Existing Models</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/loading/whole.html">1. CRS Models as a Whole</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/loading/module.html">2. CRS Models at Module Level</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/loading/single.html">3. Single CRS Modules</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../usage/interface/index.html">Interact with Models</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Interact with Models</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/interface/launch.html">1. Launch Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/interface/info.html">2. INFO Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/interface/debug.html">3. DEBUG Mode</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../usage/development/index.html">Develop New Models</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Develop New Models</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/development/setup.html">1. Tutorial Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/development/recommender.html">2. NEW Recommender</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/development/generator.html">3.  NEW Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/development/pipeline.html">4. NEW Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/development/interface.html">5. NEW Interactive Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/development/sharing.html">6. Share NEW models</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API REFERENCE</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../baseclass/index.html">Base Classes</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Base Classes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../baseclass/config.html">recwizard.BaseConfig</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../baseclass/tokenizer.html">recwizard.BaseTokenizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../baseclass/module.html">recwizard.BaseModule</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../baseclass/pipeline.html">recwizard.BasePipeline</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../pipelines/index.html">Pipelines</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Pipelines</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../pipelines/expansion.html">Expansion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pipelines/fill_blank.html">FillBlank</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pipelines/switch_decode.html">SwitchDecode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pipelines/chatgpt.html">ChatGPT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pipelines/trivial.html">Trivial</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Modules</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Modules</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../redial/index.html">ReDIAL</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of ReDIAL</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../redial/recommender.html">Recommender Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../redial/generator.html">Generator Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../redial/supporting.html">Supporting Modules</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../kbrd/index.html">KBRD</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of KBRD</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../kbrd/recommender.html">Recommender Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kbrd/generator.html">Generator Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kbrd/supporting.html">Supporting Modules</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../kgsf/index.html">KGSF</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of KGSF</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../kgsf/recommender.html">Recommender Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kgsf/generator.html">Generator Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kgsf/supporting.html">Supporting Modules</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">UniCRS</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of UniCRS</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="recommender.html">Recommender Module</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Generator Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="supporting.html">Supporting Modules</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../llms/index.html">LLMs</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of LLMs</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../llms/general.html">General LLM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../llms/chatgpt.html">ChatGPT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../llms/llama.html">Llama</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="generator-module">
<h1>Generator Module<a class="headerlink" href="#generator-module" title="Permalink to this heading">#</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="recwizard.modules.unicrs.configuration_unicrs_gen.UnicrsGenConfig">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">recwizard.modules.unicrs.configuration_unicrs_gen.</span></span><span class="sig-name descname"><span class="pre">UnicrsGenConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pretrained_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kgprompt_config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_tokens</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad_token_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_gen_len</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/recwizard/modules/unicrs/configuration_unicrs_gen.html#UnicrsGenConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recwizard.modules.unicrs.configuration_unicrs_gen.UnicrsGenConfig" title="Permalink to this definition">#</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="recwizard.modules.unicrs.configuration_unicrs_gen.UnicrsGenConfig.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pretrained_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kgprompt_config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_tokens</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad_token_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_gen_len</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/recwizard/modules/unicrs/configuration_unicrs_gen.html#UnicrsGenConfig.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recwizard.modules.unicrs.configuration_unicrs_gen.UnicrsGenConfig.__init__" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>WEIGHT_DIMENSIONS</strong> (<em>dict</em><em>, </em><em>optional</em>) – The dimension and dtype of module parameters.
Used to initialize the parameters when they are not explicitly specified in module initialization.
Defaults to None. See also <a class="reference internal" href="../../baseclass/module.html#recwizard.module_utils.BaseModule.prepare_weight" title="recwizard.module_utils.BaseModule.prepare_weight"><code class="xref py py-func docutils literal notranslate"><span class="pre">recwizard.module_utils.BaseModule.prepare_weight()</span></code></a>.</p></li>
<li><p><strong>**kwargs</strong> – Additional parameters. Will be passed to the <cite>PretrainedConfig.__init__</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="recwizard.modules.unicrs.tokenizer_unicrs_gen.UnicrsGenTokenizer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">recwizard.modules.unicrs.tokenizer_unicrs_gen.</span></span><span class="sig-name descname"><span class="pre">UnicrsGenTokenizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context_tokenizer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'microsoft/DialoGPT-small'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt_tokenizer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'roberta-base'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context_max_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt_max_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entity2id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad_entity_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">31161</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resp_prompt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'System:'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/recwizard/modules/unicrs/tokenizer_unicrs_gen.html#UnicrsGenTokenizer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recwizard.modules.unicrs.tokenizer_unicrs_gen.UnicrsGenTokenizer" title="Permalink to this definition">#</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="recwizard.modules.unicrs.tokenizer_unicrs_gen.UnicrsGenTokenizer.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context_tokenizer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'microsoft/DialoGPT-small'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt_tokenizer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'roberta-base'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context_max_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt_max_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entity2id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad_entity_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">31161</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resp_prompt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'System:'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/recwizard/modules/unicrs/tokenizer_unicrs_gen.html#UnicrsGenTokenizer.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recwizard.modules.unicrs.tokenizer_unicrs_gen.UnicrsGenTokenizer.__init__" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entity2id</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>int</em><em>]</em>) – a dict mapping entity name to entity id. If not provided, it will be generated from id2entity.</p></li>
<li><p><strong>id2entity</strong> (<em>Dict</em><em>[</em><em>int</em><em>, </em><em>str</em><em>]</em>) – a dict mapping entity id to entity name. If not provided, it will be generated from entity2id.</p></li>
<li><p><strong>pad_entity_id</strong> (<em>int</em>) – the id for padding entity. If not provided, it will be the maximum entity id + 1.</p></li>
<li><p><strong>tokenizers</strong> (<em>List</em><em>[</em><em>PreTrainedTokenizerBase</em><em>]</em>) – a list of tokenizers to be used.</p></li>
<li><p><strong>**kwargs</strong> – other arguments for PreTrainedTokenizer</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="recwizard.modules.unicrs.tokenizer_unicrs_gen.UnicrsGenTokenizer.load_from_dataset">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load_from_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'redial_unicrs'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/recwizard/modules/unicrs/tokenizer_unicrs_gen.html#UnicrsGenTokenizer.load_from_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recwizard.modules.unicrs.tokenizer_unicrs_gen.UnicrsGenTokenizer.load_from_dataset" title="Permalink to this definition">#</a></dt>
<dd><p>Initialize the tokenizer from the dataset. By default, it will load the entity2id from the dataset.
:param dataset: the dataset name
:param **kwargs: the other arguments for initialization</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the initialized tokenizer</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>(<a class="reference internal" href="../../baseclass/tokenizer.html#recwizard.tokenizer_utils.BaseTokenizer" title="recwizard.tokenizer_utils.BaseTokenizer">BaseTokenizer</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="recwizard.modules.unicrs.tokenizer_unicrs_gen.UnicrsGenTokenizer.mergeEncoding">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">mergeEncoding</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">encodings</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">BatchEncoding</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">BatchEncoding</span></span></span><a class="reference internal" href="../../../_modules/recwizard/modules/unicrs/tokenizer_unicrs_gen.html#UnicrsGenTokenizer.mergeEncoding"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recwizard.modules.unicrs.tokenizer_unicrs_gen.UnicrsGenTokenizer.mergeEncoding" title="Permalink to this definition">#</a></dt>
<dd><p>Merge a list of encodings into one encoding.
Assumes each encoding has the same attributes other than data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="recwizard.modules.unicrs.tokenizer_unicrs_gen.UnicrsGenTokenizer.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/recwizard/modules/unicrs/tokenizer_unicrs_gen.html#UnicrsGenTokenizer.__call__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recwizard.modules.unicrs.tokenizer_unicrs_gen.UnicrsGenTokenizer.__call__" title="Permalink to this definition">#</a></dt>
<dd><p>Main method to tokenize and prepare for the model one or several sequence(s) or one or several pair(s) of
sequences.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>text</strong> (<cite>str</cite>, <cite>List[str]</cite>, <cite>List[List[str]]</cite>, <em>optional</em>) – The sequence or batch of sequences to be encoded. Each sequence can be a string or a list of strings
(pretokenized string). If the sequences are provided as list of strings (pretokenized), you must set
<cite>is_split_into_words=True</cite> (to lift the ambiguity with a batch of sequences).</p></li>
<li><p><strong>text_pair</strong> (<cite>str</cite>, <cite>List[str]</cite>, <cite>List[List[str]]</cite>, <em>optional</em>) – The sequence or batch of sequences to be encoded. Each sequence can be a string or a list of strings
(pretokenized string). If the sequences are provided as list of strings (pretokenized), you must set
<cite>is_split_into_words=True</cite> (to lift the ambiguity with a batch of sequences).</p></li>
<li><p><strong>text_target</strong> (<cite>str</cite>, <cite>List[str]</cite>, <cite>List[List[str]]</cite>, <em>optional</em>) – The sequence or batch of sequences to be encoded as target texts. Each sequence can be a string or a
list of strings (pretokenized string). If the sequences are provided as list of strings (pretokenized),
you must set <cite>is_split_into_words=True</cite> (to lift the ambiguity with a batch of sequences).</p></li>
<li><p><strong>text_pair_target</strong> (<cite>str</cite>, <cite>List[str]</cite>, <cite>List[List[str]]</cite>, <em>optional</em>) – The sequence or batch of sequences to be encoded as target texts. Each sequence can be a string or a
list of strings (pretokenized string). If the sequences are provided as list of strings (pretokenized),
you must set <cite>is_split_into_words=True</cite> (to lift the ambiguity with a batch of sequences).</p></li>
<li><p><strong>add_special_tokens</strong> (<cite>bool</cite>, <em>optional</em>, defaults to <cite>True</cite>) – Whether or not to encode the sequences with the special tokens relative to their model.</p></li>
<li><p><strong>padding</strong> (<cite>bool</cite>, <cite>str</cite> or [<cite>~utils.PaddingStrategy</cite>], <em>optional</em>, defaults to <cite>False</cite>) – <p>Activates and controls padding. Accepts the following values:</p>
<ul>
<li><p><cite>True</cite> or <cite>‘longest’</cite>: Pad to the longest sequence in the batch (or no padding if only a single
sequence if provided).</p></li>
<li><p><cite>’max_length’</cite>: Pad to a maximum length specified with the argument <cite>max_length</cite> or to the maximum
acceptable input length for the model if that argument is not provided.</p></li>
<li><p><cite>False</cite> or <cite>‘do_not_pad’</cite> (default): No padding (i.e., can output a batch with sequences of different
lengths).</p></li>
</ul>
</p></li>
<li><p><strong>truncation</strong> (<cite>bool</cite>, <cite>str</cite> or [<cite>~tokenization_utils_base.TruncationStrategy</cite>], <em>optional</em>, defaults to <cite>False</cite>) – <p>Activates and controls truncation. Accepts the following values:</p>
<ul>
<li><p><cite>True</cite> or <cite>‘longest_first’</cite>: Truncate to a maximum length specified with the argument <cite>max_length</cite> or
to the maximum acceptable input length for the model if that argument is not provided. This will
truncate token by token, removing a token from the longest sequence in the pair if a pair of
sequences (or a batch of pairs) is provided.</p></li>
<li><p><cite>’only_first’</cite>: Truncate to a maximum length specified with the argument <cite>max_length</cite> or to the
maximum acceptable input length for the model if that argument is not provided. This will only
truncate the first sequence of a pair if a pair of sequences (or a batch of pairs) is provided.</p></li>
<li><p><cite>’only_second’</cite>: Truncate to a maximum length specified with the argument <cite>max_length</cite> or to the
maximum acceptable input length for the model if that argument is not provided. This will only
truncate the second sequence of a pair if a pair of sequences (or a batch of pairs) is provided.</p></li>
<li><p><cite>False</cite> or <cite>‘do_not_truncate’</cite> (default): No truncation (i.e., can output batch with sequence lengths
greater than the model maximum admissible input size).</p></li>
</ul>
</p></li>
<li><p><strong>max_length</strong> (<cite>int</cite>, <em>optional</em>) – <p>Controls the maximum length to use by one of the truncation/padding parameters.</p>
<p>If left unset or set to <cite>None</cite>, this will use the predefined model maximum length if a maximum length
is required by one of the truncation/padding parameters. If the model has no specific maximum input
length (like XLNet) truncation/padding to a maximum length will be deactivated.</p>
</p></li>
<li><p><strong>stride</strong> (<cite>int</cite>, <em>optional</em>, defaults to 0) – If set to a number along with <cite>max_length</cite>, the overflowing tokens returned when
<cite>return_overflowing_tokens=True</cite> will contain some tokens from the end of the truncated sequence
returned to provide some overlap between truncated and overflowing sequences. The value of this
argument defines the number of overlapping tokens.</p></li>
<li><p><strong>is_split_into_words</strong> (<cite>bool</cite>, <em>optional</em>, defaults to <cite>False</cite>) – Whether or not the input is already pre-tokenized (e.g., split into words). If set to <cite>True</cite>, the
tokenizer assumes the input is already split into words (for instance, by splitting it on whitespace)
which it will tokenize. This is useful for NER or token classification.</p></li>
<li><p><strong>pad_to_multiple_of</strong> (<cite>int</cite>, <em>optional</em>) – If set will pad the sequence to a multiple of the provided value. Requires <cite>padding</cite> to be activated.
This is especially useful to enable the use of Tensor Cores on NVIDIA hardware with compute capability
<cite>&gt;= 7.5</cite> (Volta).</p></li>
<li><p><strong>return_tensors</strong> (<cite>str</cite> or [<cite>~utils.TensorType</cite>], <em>optional</em>) – <p>If set, will return tensors instead of list of python integers. Acceptable values are:</p>
<ul>
<li><p><cite>’tf’</cite>: Return TensorFlow <cite>tf.constant</cite> objects.</p></li>
<li><p><cite>’pt’</cite>: Return PyTorch <cite>torch.Tensor</cite> objects.</p></li>
<li><p><cite>’np’</cite>: Return Numpy <cite>np.ndarray</cite> objects.</p></li>
</ul>
</p></li>
<li><p><strong>return_token_type_ids</strong> (<cite>bool</cite>, <em>optional</em>) – <p>Whether to return token type IDs. If left to the default, will return the token type IDs according to
the specific tokenizer’s default, defined by the <cite>return_outputs</cite> attribute.</p>
<p>[What are token type IDs?](../glossary#token-type-ids)</p>
</p></li>
<li><p><strong>return_attention_mask</strong> (<cite>bool</cite>, <em>optional</em>) – <p>Whether to return the attention mask. If left to the default, will return the attention mask according
to the specific tokenizer’s default, defined by the <cite>return_outputs</cite> attribute.</p>
<p>[What are attention masks?](../glossary#attention-mask)</p>
</p></li>
<li><p><strong>return_overflowing_tokens</strong> (<cite>bool</cite>, <em>optional</em>, defaults to <cite>False</cite>) – Whether or not to return overflowing token sequences. If a pair of sequences of input ids (or a batch
of pairs) is provided with <cite>truncation_strategy = longest_first</cite> or <cite>True</cite>, an error is raised instead
of returning overflowing tokens.</p></li>
<li><p><strong>return_special_tokens_mask</strong> (<cite>bool</cite>, <em>optional</em>, defaults to <cite>False</cite>) – Whether or not to return special tokens mask information.</p></li>
<li><p><strong>return_offsets_mapping</strong> (<cite>bool</cite>, <em>optional</em>, defaults to <cite>False</cite>) – <p>Whether or not to return <cite>(char_start, char_end)</cite> for each token.</p>
<p>This is only available on fast tokenizers inheriting from [<cite>PreTrainedTokenizerFast</cite>], if using
Python’s tokenizer, this method will raise <cite>NotImplementedError</cite>.</p>
</p></li>
<li><p><strong>return_length</strong> (<cite>bool</cite>, <em>optional</em>, defaults to <cite>False</cite>) – Whether or not to return the lengths of the encoded inputs.</p></li>
<li><p><strong>verbose</strong> (<cite>bool</cite>, <em>optional</em>, defaults to <cite>True</cite>) – Whether or not to print more information and warnings.</p></li>
<li><p><strong>**kwargs</strong> – passed to the <cite>self.tokenize()</cite> method</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>A [<cite>BatchEncoding</cite>] with the following fields:</p>
<ul>
<li><p><strong>input_ids</strong> – List of token ids to be fed to a model.</p>
<p>[What are input IDs?](../glossary#input-ids)</p>
</li>
<li><p><strong>token_type_ids</strong> – List of token type ids to be fed to a model (when <cite>return_token_type_ids=True</cite> or
if <em>“token_type_ids”</em> is in <cite>self.model_input_names</cite>).</p>
<p>[What are token type IDs?](../glossary#token-type-ids)</p>
</li>
<li><p><strong>attention_mask</strong> – List of indices specifying which tokens should be attended to by the model (when
<cite>return_attention_mask=True</cite> or if <em>“attention_mask”</em> is in <cite>self.model_input_names</cite>).</p>
<p>[What are attention masks?](../glossary#attention-mask)</p>
</li>
<li><p><strong>overflowing_tokens</strong> – List of overflowing tokens sequences (when a <cite>max_length</cite> is specified and
<cite>return_overflowing_tokens=True</cite>).</p></li>
<li><p><strong>num_truncated_tokens</strong> – Number of tokens truncated (when a <cite>max_length</cite> is specified and
<cite>return_overflowing_tokens=True</cite>).</p></li>
<li><p><strong>special_tokens_mask</strong> – List of 0s and 1s, with 1 specifying added special tokens and 0 specifying
regular sequence tokens (when <cite>add_special_tokens=True</cite> and <cite>return_special_tokens_mask=True</cite>).</p></li>
<li><p><strong>length</strong> – The length of the inputs (when <cite>return_length=True</cite>)</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>[<cite>BatchEncoding</cite>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="recwizard.modules.unicrs.tokenizer_unicrs_gen.UnicrsGenTokenizer.encodes">
<span class="sig-name descname"><span class="pre">encodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">encode_funcs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">texts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">BatchEncoding</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../../_modules/recwizard/modules/unicrs/tokenizer_unicrs_gen.html#UnicrsGenTokenizer.encodes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recwizard.modules.unicrs.tokenizer_unicrs_gen.UnicrsGenTokenizer.encodes" title="Permalink to this definition">#</a></dt>
<dd><p>This function is called to apply encoding functions from different tokenizers. It will be
used by both <cite>encode_plus</cite> and <cite>batch_encode_plus</cite>.</p>
<p>If you want to call different tokenizers with different arguments, override this method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>encode_funcs</strong> – the encoding functions from <cite>self.tokenizers</cite>.</p></li>
<li><p><strong>texts</strong> – the processed text for each encoding function</p></li>
<li><p><strong>**kwargs</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a list of BatchEncoding, the length of the list is the same as the number of tokenizer</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="recwizard.modules.unicrs.modeling_unicrs_gen.UnicrsGen">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">recwizard.modules.unicrs.modeling_unicrs_gen.</span></span><span class="sig-name descname"><span class="pre">UnicrsGen</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#recwizard.modules.unicrs.configuration_unicrs_gen.UnicrsGenConfig" title="recwizard.modules.unicrs.configuration_unicrs_gen.UnicrsGenConfig"><span class="pre">UnicrsGenConfig</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/recwizard/modules/unicrs/modeling_unicrs_gen.html#UnicrsGen"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recwizard.modules.unicrs.modeling_unicrs_gen.UnicrsGen" title="Permalink to this definition">#</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="recwizard.modules.unicrs.modeling_unicrs_gen.UnicrsGen.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#recwizard.modules.unicrs.configuration_unicrs_gen.UnicrsGenConfig" title="recwizard.modules.unicrs.configuration_unicrs_gen.UnicrsGenConfig"><span class="pre">UnicrsGenConfig</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/recwizard/modules/unicrs/modeling_unicrs_gen.html#UnicrsGen.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recwizard.modules.unicrs.modeling_unicrs_gen.UnicrsGen.__init__" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> – config for PreTrainedModel</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="recwizard.modules.unicrs.modeling_unicrs_gen.UnicrsGen.forward">
<span class="sig-name descname"><span class="pre">forward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entities</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/recwizard/modules/unicrs/modeling_unicrs_gen.html#UnicrsGen.forward"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recwizard.modules.unicrs.modeling_unicrs_gen.UnicrsGen.forward" title="Permalink to this definition">#</a></dt>
<dd><p>Defines the computation performed at every call.</p>
<p>Should be overridden by all subclasses.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although the recipe for forward pass needs to be defined within
this function, one should call the <code class="xref py py-class docutils literal notranslate"><span class="pre">Module</span></code> instance afterwards
instead of this since the former takes care of running the
registered hooks while the latter silently ignores them.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="recwizard.modules.unicrs.modeling_unicrs_gen.UnicrsGen.generate">
<span class="sig-name descname"><span class="pre">generate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entities</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/recwizard/modules/unicrs/modeling_unicrs_gen.html#UnicrsGen.generate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#recwizard.modules.unicrs.modeling_unicrs_gen.UnicrsGen.generate" title="Permalink to this definition">#</a></dt>
<dd><p>Generates sequences of token ids for models with a language modeling head.</p>
<p>&lt;Tip warning={true}&gt;</p>
<p>Most generation-controlling parameters are set in <cite>generation_config</cite> which, if not passed, will be set to the
model’s default generation configuration. You can override any <cite>generation_config</cite> by passing the corresponding
parameters to generate(), e.g. <cite>.generate(inputs, num_beams=4, do_sample=True)</cite>.</p>
<p>For an overview of generation strategies and code examples, check out the [following
guide](../generation_strategies).</p>
<p>&lt;/Tip&gt;</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> (<cite>torch.Tensor</cite> of varying shape depending on the modality, <em>optional</em>) – The sequence used as a prompt for the generation or as model inputs to the encoder. If <cite>None</cite> the
method initializes it with <cite>bos_token_id</cite> and a batch size of 1. For decoder-only models <cite>inputs</cite>
should of in the format of <cite>input_ids</cite>. For encoder-decoder models <em>inputs</em> can represent any of
<cite>input_ids</cite>, <cite>input_values</cite>, <cite>input_features</cite>, or <cite>pixel_values</cite>.</p></li>
<li><p><strong>generation_config</strong> (<cite>~generation.GenerationConfig</cite>, <em>optional</em>) – The generation configuration to be used as base parametrization for the generation call. <cite>**kwargs</cite>
passed to generate matching the attributes of <cite>generation_config</cite> will override them. If
<cite>generation_config</cite> is not provided, the default will be used, which had the following loading
priority: 1) from the <cite>generation_config.json</cite> model file, if it exists; 2) from the model
configuration. Please note that unspecified parameters will inherit [<cite>~generation.GenerationConfig</cite>]’s
default values, whose documentation should be checked to parameterize generation.</p></li>
<li><p><strong>logits_processor</strong> (<cite>LogitsProcessorList</cite>, <em>optional</em>) – Custom logits processors that complement the default logits processors built from arguments and
generation config. If a logit processor is passed that is already created with the arguments or a
generation config an error is thrown. This feature is intended for advanced users.</p></li>
<li><p><strong>stopping_criteria</strong> (<cite>StoppingCriteriaList</cite>, <em>optional</em>) – Custom stopping criteria that complement the default stopping criteria built from arguments and a
generation config. If a stopping criteria is passed that is already created with the arguments or a
generation config an error is thrown. This feature is intended for advanced users.</p></li>
<li><p><strong>prefix_allowed_tokens_fn</strong> (<cite>Callable[[int, torch.Tensor], List[int]]</cite>, <em>optional</em>) – If provided, this function constraints the beam search to allowed tokens only at each step. If not
provided no constraint is applied. This function takes 2 arguments: the batch ID <cite>batch_id</cite> and
<cite>input_ids</cite>. It has to return a list with the allowed tokens for the next generation step conditioned
on the batch ID <cite>batch_id</cite> and the previously generated tokens <cite>inputs_ids</cite>. This argument is useful
for constrained generation conditioned on the prefix, as described in [Autoregressive Entity
Retrieval](<a class="reference external" href="https://arxiv.org/abs/2010.00904">https://arxiv.org/abs/2010.00904</a>).</p></li>
<li><p><strong>synced_gpus</strong> (<cite>bool</cite>, <em>optional</em>) – Whether to continue running the while loop until max_length. Unless overridden this flag will be set to
<cite>True</cite> under DeepSpeed ZeRO Stage 3 multiple GPUs environment to avoid hanging if one GPU finished
generating before other GPUs. Otherwise it’ll be set to <cite>False</cite>.</p></li>
<li><p><strong>assistant_model</strong> (<cite>PreTrainedModel</cite>, <em>optional</em>) – An assistant model that can be used to accelerate generation. The assistant model must have the exact
same tokenizer. The acceleration is achieved when forecasting candidate tokens with the assistent model
is much faster than running generation with the model you’re calling generate from. As such, the
assistant model should be much smaller.</p></li>
<li><p><strong>streamer</strong> (<cite>BaseStreamer</cite>, <em>optional</em>) – Streamer object that will be used to stream the generated sequences. Generated tokens are passed
through <cite>streamer.put(token_ids)</cite> and the streamer is responsible for any further processing.</p></li>
<li><p><strong>negative_prompt_ids</strong> (<cite>torch.LongTensor</cite> of shape <cite>(batch_size, sequence_length)</cite>, <em>optional</em>) – The negative prompt needed for some processors such as CFG. The batch size must match the input batch
size. This is an experimental feature, subject to breaking API changes in future versions.</p></li>
<li><p><strong>negative_prompt_attention_mask</strong> (<cite>torch.LongTensor</cite> of shape <cite>(batch_size, sequence_length)</cite>, <em>optional</em>) – Attention_mask for <cite>negative_prompt_ids</cite>.</p></li>
<li><p><strong>kwargs</strong> (<cite>Dict[str, Any]</cite>, <em>optional</em>) – Ad hoc parametrization of <cite>generate_config</cite> and/or additional model-specific kwargs that will be
forwarded to the <cite>forward</cite> function of the model. If the model is an encoder-decoder model, encoder
specific kwargs should not be prefixed and decoder specific kwargs should be prefixed with <em>decoder_</em>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>A [<cite>~utils.ModelOutput</cite>] (if <cite>return_dict_in_generate=True</cite>
or when <cite>config.return_dict_in_generate=True</cite>) or a <cite>torch.FloatTensor</cite>.</p>
<blockquote>
<div><p>If the model is <em>not</em> an encoder-decoder model (<cite>model.config.is_encoder_decoder=False</cite>), the possible
[<cite>~utils.ModelOutput</cite>] types are:</p>
<blockquote>
<div><ul class="simple">
<li><p>[<cite>~generation.GreedySearchDecoderOnlyOutput</cite>],</p></li>
<li><p>[<cite>~generation.SampleDecoderOnlyOutput</cite>],</p></li>
<li><p>[<cite>~generation.BeamSearchDecoderOnlyOutput</cite>],</p></li>
<li><p>[<cite>~generation.BeamSampleDecoderOnlyOutput</cite>]</p></li>
</ul>
</div></blockquote>
<p>If the model is an encoder-decoder model (<cite>model.config.is_encoder_decoder=True</cite>), the possible
[<cite>~utils.ModelOutput</cite>] types are:</p>
<blockquote>
<div><ul class="simple">
<li><p>[<cite>~generation.GreedySearchEncoderDecoderOutput</cite>],</p></li>
<li><p>[<cite>~generation.SampleEncoderDecoderOutput</cite>],</p></li>
<li><p>[<cite>~generation.BeamSearchEncoderDecoderOutput</cite>],</p></li>
<li><p>[<cite>~generation.BeamSampleEncoderDecoderOutput</cite>]</p></li>
</ul>
</div></blockquote>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>[<cite>~utils.ModelOutput</cite>] or <cite>torch.LongTensor</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="recwizard.modules.unicrs.modeling_unicrs_gen.UnicrsGen.response">
<span class="sig-name descname"><span class="pre">response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#recwizard.modules.unicrs.modeling_unicrs_gen.UnicrsGen.response" title="Permalink to this definition">#</a></dt>
<dd><p>The main function for the module to generate a response given an input.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please refer to our tutorial for implementation guidance: <a class="reference internal" href="../../../development/overview.html"><span class="doc">Overview</span></a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>raw_input</strong> (<em>str</em>) – the text input</p></li>
<li><p><strong>tokenizer</strong> (<em>PreTrainedTokenizer</em>) – the tokenizer used to tokenize the input</p></li>
<li><p><strong>return_dict</strong> (<em>bool</em>) – if set to True, will return a dict of outputs instead of a single output</p></li>
<li><p><strong>**kwargs</strong> – the keyword arguments that will be passed to <a class="reference internal" href="#recwizard.modules.unicrs.modeling_unicrs_gen.UnicrsGen.forward" title="recwizard.modules.unicrs.modeling_unicrs_gen.UnicrsGen.forward"><code class="xref py py-func docutils literal notranslate"><span class="pre">forward()</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>By default, a single output will be returned. If <cite>return_dict</cite> is set to True, a dict of outputs will be returned.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="supporting.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Supporting Modules</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="recommender.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Recommender Module</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, McAuley Lab
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Generator Module</a><ul>
<li><a class="reference internal" href="#recwizard.modules.unicrs.configuration_unicrs_gen.UnicrsGenConfig"><code class="docutils literal notranslate"><span class="pre">UnicrsGenConfig</span></code></a><ul>
<li><a class="reference internal" href="#recwizard.modules.unicrs.configuration_unicrs_gen.UnicrsGenConfig.__init__"><code class="docutils literal notranslate"><span class="pre">UnicrsGenConfig.__init__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#recwizard.modules.unicrs.tokenizer_unicrs_gen.UnicrsGenTokenizer"><code class="docutils literal notranslate"><span class="pre">UnicrsGenTokenizer</span></code></a><ul>
<li><a class="reference internal" href="#recwizard.modules.unicrs.tokenizer_unicrs_gen.UnicrsGenTokenizer.__init__"><code class="docutils literal notranslate"><span class="pre">UnicrsGenTokenizer.__init__()</span></code></a></li>
<li><a class="reference internal" href="#recwizard.modules.unicrs.tokenizer_unicrs_gen.UnicrsGenTokenizer.load_from_dataset"><code class="docutils literal notranslate"><span class="pre">UnicrsGenTokenizer.load_from_dataset()</span></code></a></li>
<li><a class="reference internal" href="#recwizard.modules.unicrs.tokenizer_unicrs_gen.UnicrsGenTokenizer.mergeEncoding"><code class="docutils literal notranslate"><span class="pre">UnicrsGenTokenizer.mergeEncoding()</span></code></a></li>
<li><a class="reference internal" href="#recwizard.modules.unicrs.tokenizer_unicrs_gen.UnicrsGenTokenizer.__call__"><code class="docutils literal notranslate"><span class="pre">UnicrsGenTokenizer.__call__()</span></code></a></li>
<li><a class="reference internal" href="#recwizard.modules.unicrs.tokenizer_unicrs_gen.UnicrsGenTokenizer.encodes"><code class="docutils literal notranslate"><span class="pre">UnicrsGenTokenizer.encodes()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#recwizard.modules.unicrs.modeling_unicrs_gen.UnicrsGen"><code class="docutils literal notranslate"><span class="pre">UnicrsGen</span></code></a><ul>
<li><a class="reference internal" href="#recwizard.modules.unicrs.modeling_unicrs_gen.UnicrsGen.__init__"><code class="docutils literal notranslate"><span class="pre">UnicrsGen.__init__()</span></code></a></li>
<li><a class="reference internal" href="#recwizard.modules.unicrs.modeling_unicrs_gen.UnicrsGen.forward"><code class="docutils literal notranslate"><span class="pre">UnicrsGen.forward()</span></code></a></li>
<li><a class="reference internal" href="#recwizard.modules.unicrs.modeling_unicrs_gen.UnicrsGen.generate"><code class="docutils literal notranslate"><span class="pre">UnicrsGen.generate()</span></code></a></li>
<li><a class="reference internal" href="#recwizard.modules.unicrs.modeling_unicrs_gen.UnicrsGen.response"><code class="docutils literal notranslate"><span class="pre">UnicrsGen.response()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js?v=57cfd03c"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../../_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="../../../_static/design-tabs.js?v=36754332"></script>
    </body>
</html>